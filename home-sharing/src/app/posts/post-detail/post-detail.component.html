<div class="container-detail">
  <div class="title">
    <div #target style="visibility: hidden"></div>

    <h2 #point_1>{{postDetail.title}}

      <span class="star_detail">
      <svg fill="none" height="35" viewBox="0 0 36 35" width="36" xmlns="http://www.w3.org/2000/svg">
<!--      <g filter="url(#filter0_d_116_116)">-->
        <!--      <path-->
        <!--        d="M9.49165 26.25L11.5583 17.5L4.58331 11.5L13.8833 10.75L17.5 2.5L21.1166 10.75L30.4166 11.5L26.2833 15H25.25C24.3458 15 23.4416 15.125 22.5375 15.5L25.3791 13.125L19.6958 12.625L17.5 7.625L15.3041 12.625L9.62081 13.125L13.8833 16.75L12.5916 22.125L17.5 19.25L18.1458 19.625C17.8875 20.25 17.6291 21 17.6291 21.625L9.49165 26.25ZM24.9916 26.5L21.375 22.75L22.925 21.25L24.9916 23.25L29.6416 18.75L31.1916 20.5L24.9916 26.5Z"-->
        <!--        fill="#F3420A"/>-->
        <!--      </g>-->
      <defs>
      <filter color-interpolation-filters="sRGB" filterUnits="userSpaceOnUse" height="38" id="filter0_d_116_116"
              width="39" x="-2"
              y="0">
      <feFlood flood-opacity="0" result="BackgroundImageFix"/>
      <feColorMatrix in="SourceAlpha" result="hardAlpha" type="matrix"
                     values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"/>
      <feOffset dy="4"/>
      <feGaussianBlur stdDeviation="2"/>
      <feComposite in2="hardAlpha" operator="out"/>
      <feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"/>
      <feBlend in2="BackgroundImageFix" mode="normal" result="effect1_dropShadow_116_116"/>
      <feBlend in="SourceGraphic" in2="effect1_dropShadow_116_116" mode="normal" result="shape"/>
      </filter>
      </defs>
      </svg>
    </span></h2>
    <p>{{postDetail.avgRate ? postDetail.avgRate : "Chưa có đánh giá"}}
      <svg fill="none" height="30" viewBox="0 0 36 30" width="36" xmlns="http://www.w3.org/2000/svg">
        <path
          d="M17.935 0L13.5318 10.9091H0.322266L11.3302 18.1819L6.92704 29.091L17.935 21.8183L28.943 29.091L24.5398 18.1819L35.5477 10.9091H22.3382L17.935 0Z"
          fill="#F36B08"/>
      </svg>
      |{{postDetail.guestNumber}} khách - {{postDetail.numberOfBedrooms}} phòng ngủ - {{postDetail.numberOfBeds}} giường
      - {{postDetail.numberOfBathrooms}} vệ sinh
      <!--      <button type="button" (click)="favoritePost()" mat-icon-button color="warn"-->
      <!--              aria-label="Example icon button with a heart icon">-->
      <!--        <mat-icon>favorite</mat-icon>-->
      <!--      </button>-->
    </p>

  </div>
  <div class="detail-content">
    <div class="detail-content-one">
      <div (click)="showMore(1)" class="detail-card-img">
        <div class="detail-card-img-first">
          <div class="detail-card-img-item" style="width: 450px; height: 345px;">
            <img alt="" src="{{postDetail.imageDtoList[0].imageUrl}}" style="border-top-left-radius: 28px;">
          </div>
          <div class="detail-card-img-item-childs">
            <div class="detail-card-img-item-child" style="width: 235px; height: 170px;">
              <img alt="" src="{{postDetail.imageDtoList[1].imageUrl}}" style="border-top-right-radius: 28px;">
            </div>
            <div class="detail-card-img-item-child" style="width: 235px; height: 170px;">
              <img alt="" src="{{postDetail.imageDtoList[2].imageUrl}}">
            </div>
          </div>
        </div>
        <div class="detail-card-img-second">
          <div class="detail-card-img-item" style="width: 240px; height: 335px;">
            <img alt="" src="{{postDetail.imageDtoList[3].imageUrl}}" style="border-bottom-left-radius: 28px;">
          </div>
          <div class="detail-card-img-item" style="width: 445px; height: 335px;">
            <img alt="" src="{{postDetail.imageDtoList[4].imageUrl}}" style="border-bottom-right-radius: 28px;">
          </div>
        </div>
      </div>
    </div>
    <div class="detail-content-two">
      <div class="detail-content-intro">
        <div (click)="showMore(2)" class="utilities">
          <div class="utility-title">
            <h4 class="h4-ultility">Tiện ích xung quanh</h4>
          </div>
          <div class="utility-content">
            <ul>
              <li *ngFor="let p of postDetail.postUtilityDtoList;let i = index">
                <div *ngIf="i<=3">
                  <svg height="16" viewBox="0 0 24 24" width="16" xmlns="http://www.w3.org/2000/svg">
                    <path
                      d="M21.03 5.72a.75.75 0 010 1.06l-11.5 11.5a.75.75 0 01-1.072-.012l-5.5-5.75a.75.75 0 111.084-1.036l4.97 5.195L19.97 5.72a.75.75 0 011.06 0z"
                      fill-rule="evenodd"></path>
                  </svg>
                  {{p.nameUtility.length > 9 ? (p.nameUtility|slice:0:9) + '...' : (p.nameUtility)}}
                </div>

              </li>
            </ul>
          </div>
        </div>
        <div class="info-host">
          <div class="host">
            <div class="host-image" style="width: 55px; height: 55px;">
              <img alt="" src="{{postDetail.imageUrlHost}}">
            </div>
            <div class="host-name">
              <h2>Chủ nhà</h2>
              <h2>
                {{postDetail.hostName}}
                <span *ngIf="postDetail.typeAccountHost==1" class="ms-2" style="margin: 0">
                  <svg fill="none" height="24" viewBox="0 0 23 24" width="23" xmlns="http://www.w3.org/2000/svg">
                    <path
                      d="M11.8819 23.3056H10.6918L7.89247 20.3208H3.75221L2.86381 19.4532V15.2536L0.0310059 12.2688V11.0368L2.86381 8.05197V3.8351L3.75221 2.96743H7.89247L10.6918 0H11.8819L14.765 2.96743H18.8382L19.6763 3.81775V8.05197L22.5426 11.0368V12.2688L19.626 15.2536V19.4532L18.7879 20.3208H14.765L11.8819 23.3056ZM9.11611 15.9478H10.3062L16.6256 9.40554L15.4354 8.17345L9.71954 14.1083L7.40636 11.7135L6.21625 12.9456L9.11611 15.9478Z"
                      fill="black"/>
                </svg>
            </span>
              </h2>
              <p style="font-size: 11px;">Tham gia vào ngày {{postDetail.createDate | date: 'dd/MM/yyyy'}}</p>

            </div>


          </div>
        </div>
      </div>


      <div class="div-contact d-flex flex-row">
        <button (click)="goToLink(postDetail.mobileHost)" class="btn-mess" mat-raised-button>
          <mat-icon>forum</mat-icon>
          Liên hệ
        </button>
      </div>
      <div class="div-scroll">
        <button (click)="scrollToElement(target)" mat-mini-fab style="background-color: #367E18">
          <mat-icon>expand_less</mat-icon>
        </button>
      </div>


      <div class="detail-content-info" style="margin-top: 10px;">
        <div class="title">
          <h3 class="h4-ultility">Thông tin chi tiết</h3>
        </div>
        <div class="address">
          <svg fill="none" height="25" viewBox="0 0 25 25" width="25" xmlns="http://www.w3.org/2000/svg">
            <path
              d="M6.25001 19.7305H9.375V13.4998H15.625V19.7305H18.75V10.3845L12.5 5.71142L6.25001 10.3845V19.7305ZM6.25001 21.8074C5.67709 21.8074 5.18681 21.6042 4.77917 21.1979C4.37084 20.7908 4.16667 20.3017 4.16667 19.7305V10.3845C4.16667 10.0556 4.24063 9.74408 4.38855 9.44985C4.53577 9.15562 4.73959 8.91332 5.00001 8.72293L11.25 4.0499C11.441 3.91144 11.6406 3.8076 11.849 3.73837C12.0573 3.66914 12.2743 3.63452 12.5 3.63452C12.7257 3.63452 12.9427 3.66914 13.151 3.73837C13.3594 3.8076 13.559 3.91144 13.75 4.0499L20 8.72293C20.2604 8.91332 20.4646 9.15562 20.6125 9.44985C20.7597 9.74408 20.8333 10.0556 20.8333 10.3845V19.7305C20.8333 20.3017 20.6295 20.7908 20.2219 21.1979C19.8135 21.6042 19.3229 21.8074 18.75 21.8074H13.5417V15.5767H11.4583V21.8074H6.25001Z"
              fill="black"/>
          </svg>
          <span>{{postDetail.address}}, {{postDetail.districtDto.districtName}}
            ,{{postDetail.districtDto.provinceName}}</span>
        </div>
        <div class="mobile">
          <svg fill="none" height="42" viewBox="0 0 42 42" width="42" xmlns="http://www.w3.org/2000/svg">
            <path
              d="M15.1964 13.4583C15.1964 13.2159 15.2792 12.9835 15.4266 12.8121C15.5739 12.6407 15.7738 12.5445 15.9821 12.5445H20.6964C20.9048 12.5445 21.1047 12.6407 21.252 12.8121C21.3994 12.9835 21.4821 13.2159 21.4821 13.4583C21.4821 13.7007 21.3994 13.9331 21.252 14.1045C21.1047 14.2759 20.9048 14.3721 20.6964 14.3721H15.9821C15.7738 14.3721 15.5739 14.2759 15.4266 14.1045C15.2792 13.9331 15.1964 13.7007 15.1964 13.4583ZM15.9821 17.1137C15.7738 17.1137 15.5739 17.2099 15.4266 17.3813C15.2792 17.5527 15.1964 17.7851 15.1964 18.0275C15.1964 18.2699 15.2792 18.5023 15.4266 18.6737C15.5739 18.845 15.7738 18.9413 15.9821 18.9413H20.6964C20.9048 18.9413 21.1047 18.845 21.252 18.6737C21.3994 18.5023 21.4821 18.2699 21.4821 18.0275C21.4821 17.7851 21.3994 17.5527 21.252 17.3813C21.1047 17.2099 20.9048 17.1137 20.6964 17.1137H15.9821ZM11.2679 13.4583C11.2679 13.943 11.1023 14.4079 10.8076 14.7507C10.5129 15.0934 10.1132 15.286 9.69643 15.286C9.27966 15.286 8.87996 15.0934 8.58526 14.7507C8.29056 14.4079 8.125 13.943 8.125 13.4583C8.125 12.9736 8.29056 12.5087 8.58526 12.1659C8.87996 11.8232 9.27966 11.6306 9.69643 11.6306C10.1132 11.6306 10.5129 11.8232 10.8076 12.1659C11.1023 12.5087 11.2679 12.9736 11.2679 13.4583ZM6.55357 17.5706C6.55357 17.207 6.67774 16.8584 6.89877 16.6013C7.11979 16.3442 7.41957 16.1998 7.73214 16.1998H11.6607C11.9733 16.1998 12.2731 16.3442 12.4941 16.6013C12.7151 16.8584 12.8393 17.207 12.8393 17.5706C12.8393 17.5706 12.8393 20.769 9.69643 20.769C6.55357 20.769 6.55357 17.5706 6.55357 17.5706ZM2.625 8.20374C2.625 7.41605 2.89404 6.66063 3.37292 6.10365C3.85181 5.54667 4.50132 5.23376 5.17857 5.23376H22.0714C22.7487 5.23376 23.3982 5.54667 23.8771 6.10365C24.356 6.66063 24.625 7.41605 24.625 8.20374V24.1959C24.625 24.5859 24.559 24.9721 24.4306 25.3325C24.3023 25.6928 24.1142 26.0202 23.8771 26.296C23.64 26.5718 23.3585 26.7905 23.0486 26.9398C22.7388 27.089 22.4068 27.1659 22.0714 27.1659H5.17857C4.84323 27.1659 4.51118 27.089 4.20136 26.9398C3.89155 26.7905 3.61004 26.5718 3.37292 26.296C3.1358 26.0202 2.94771 25.6928 2.81938 25.3325C2.69105 24.9721 2.625 24.5859 2.625 24.1959V8.20374ZM5.17857 7.06144C4.63643 7.06144 4.19643 7.57319 4.19643 8.20374V24.1959C4.19643 24.8264 4.63643 25.3382 5.17857 25.3382H22.0714C22.6136 25.3382 23.0536 24.8264 23.0536 24.1959V8.20374C23.0536 7.57319 22.6136 7.06144 22.0714 7.06144H5.17857Z"
              fill="black"/>
          </svg>
          <span>{{postDetail.mobileHost}}</span>
        </div>
        <hr>
        <div class="desription">
          <p>{{(postDetail.description.length > 500) ? (postDetail.description|slice:0:500) + '...' : (postDetail.description)}}
            <span (click)="showMore(3)" class="span__read-more">xem thêm</span>
          </p>
        </div>
        <hr>
        <div class="map" style="height: 265px;overflow: hidden;border-radius: 16px">
          <div class="title-mapp">
            <h3 class="h4-ultility">Bản đồ</h3>
          </div>
          <div class="image-map" style="height: 100%;border-radius: 16px">

            <app-map [isDetailMode]="true" [lat]="+postDetail.latitude" [lng]="+postDetail.longitude"></app-map>

          </div>
        </div>

      </div>
    </div>
    <div *ngIf="isShowRate" class="detail-content-third">
      <div class="title-rate">
        <h2 style="font-size: 36px;">Đánh giá</h2>
      </div>
      <div *ngIf="rates.length<=0" class="title-rate-detail">
        <p>Chưa có đánh giá nào</p>
      </div>
      <div *ngIf="rates.length>0">
        <div *ngFor="let rate of rates" class="rate">
          <div class="rate-item">
            <div class="rate-item-first">
              <div class="rate-item-image">
                <img alt="" src="assets/images/image%206.png">
              </div>
              <div class="info-rate">
                <div class="customer-name">
                  <h2>{{rate.username}}</h2>
                  <svg *ngFor="let i2 of [].constructor(5);let i = index"
                       fill="none" height="30" viewBox="0 0 36 30" width="36" xmlns="http://www.w3.org/2000/svg">
                    <path *ngIf="i<rate.point"
                          d="M17.935 0L13.5318 10.9091H0.322266L11.3302 18.1819L6.92704 29.091L17.935 21.8183L28.943 29.091L24.5398 18.1819L35.5477 10.9091H22.3382L17.935 0Z"
                          fill="#F36B08"/>
                    <path *ngIf="i>=rate.point"
                          d="M13.5318 11.4091H13.8692L13.9955 11.0963L17.935 1.33588L21.8745 11.0963L22.0008 11.4091H22.3382H33.8839L24.2642 17.7647L23.9231 17.99L24.0761 18.369L27.8779 27.7881L18.2106 21.4011L17.935 21.219L17.6594 21.4011L7.99214 27.7881L11.7939 18.369L11.9469 17.99L11.6058 17.7647L1.98611 11.4091H13.5318Z"
                          fill="white" stroke="#F36B08"/>
                  </svg>
                </div>
                <div class="rate-date">
                  <p>{{rate.dateRate}}</p>
                </div>
                <div>
                  <button (click)="onLikeRate(rate.rateID)" aria-label="Example icon button with a heart icon"
                          color="warn" mat-icon-button
                          type="button">
                    <mat-icon layout-fill="0">thumb_up_off</mat-icon>
                  </button>
                  <button (click)="onDisLikeRate(rate.rateID)" aria-label="Example icon button with a heart icon"
                          color="warn" mat-icon-button
                          type="button">
                    <mat-icon layout-fill="0">thumb_down</mat-icon>
                  </button>
                  <!--                  <button type="button" (click)="onReportRate(rate.rateID,rate.username)"  mat-icon-button color="warn" aria-label="Example icon button with a heart icon">-->
                  <!--                    <mat-icon  layout-fill="0">flag</mat-icon>-->
                  <!--                  </button>-->
                </div>
              </div>
            </div>
            <div class="rate-item-second">
              <p>{{rate.comment}}</p>
            </div>
          </div>
          <hr class="mt-3">
        </div>
      </div>
    </div>
    <div *ngIf="isShowBooking" class="detail-content-four">
      <form [formGroup]="formBooking">
        <div class="detail-card-price">
          <div class="detail-card-price-title" style="padding-bottom: 30px;">
            <h3>Giá phòng: <span style="padding-left: 25px;">{{postDetail.price | currency: "VND" }}</span>/ngày</h3>
          </div>
          <div class="detail-card-price-type">
            <div class="detail-card-price-type-first">
              <div (click)="openDatePickerDialog()" class="detail-card-price-type-first-child"
                   style="display: grid;border-right: 1px solid #D9D9D9; padding: 10px 15px 10px 15px; text-align: center;">
                <span>Ngày nhận phòng</span>
                <input formControlName="startDateCtrl" id="date1" type="text">
              </div>
              <div (click)="openDatePickerDialog()" class="detail-card-price-type-first-child"
                   style="display: grid;border-right: 1px solid #D9D9D9; padding: 10px 15px 10px 15px; text-align: center;">
                <span>Ngày trả phòng</span>
                <input formControlName="endDateCtrl" id="date2" readonly type="text">
              </div>
              <div class="detail-card-price-type-first-child "
                   style="padding: 10px 15px 10px 15px; text-align: center; display: grid;">
                <span>Số người</span>
                <input appCheckInputNumber formControlName="guestNumber" id="date3" style="text-align: center"
                       type="number">
              </div>
            </div>
          </div>
          <div class="info-price">
            <h3>Giá phòng phải thanh toán</h3>
            <h4>{{postDetail.price | currency: "VND" }} x {{daysBetween ? daysBetween : "0" }} ngày
              = {{totalPriceInDays ? (totalPriceInDays | currency: "VND") : "0" }}</h4>
            <!--          <h3>Phí dịch vụ</h3>-->
            <h5>(Chưa bao gồm phí dịch vụ)</h5>
            <hr style="margin-top: 50px; margin-bottom: 30px">
            <div class="price-final">
              <div class="price-final-pay">
                <h3>Thanh toán</h3>
                <h3 style="text-align: right;">{{totalPriceInDays ? (totalPriceInDays | currency: "VND") : "" }}</h3>
              </div>
              <div class="total-vat">
                <h3>Tổng thanh toán sau thuế(10%VAT)</h3>
                <h3
                  style="text-align: right;">{{totalPriceInDaysAfterTax ? (totalPriceInDaysAfterTax | currency: "VND") : ""}}</h3>
              </div>
            </div>
          </div>
          <div *ngIf="role=='ROLE_CUSTOMER'" class="price-button">
            <button (click)="onBooking()" type="button">Đặt ngay</button>
          </div>
          <div *ngIf="role == 'ROLE_PENDING'" class="price-button">
            <button disabled (click)="onBooking()" type="button">Tài khoản chưa được xác minh</button>
          </div>
        </div>
      </form>
    </div>
  </div>
</div>



